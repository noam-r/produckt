# ============================================================================
# ProDuckt Environment Configuration
# ============================================================================
# This file contains all environment variables needed to run ProDuckt
# Copy this file to .env and update the values for your environment
# ============================================================================

# ============================================================================
# Docker Configuration
# ============================================================================

# BUILD_TARGET: Controls which Docker build stage to use
# Options: development, production
# - development: Enables hot-reload, debug logging, and development tools
# - production: Optimized builds, production servers (Gunicorn/Nginx)
BUILD_TARGET=development

# ============================================================================
# Database Configuration
# ============================================================================

# DATABASE_URL: Connection string for the database
# 
# For Docker with SQLite (default, recommended for development):
#   - Uses persistent Docker volume mounted at /app/data
#   - Data survives container restarts
DATABASE_URL=sqlite:////app/data/produck.db
#
# For Docker with PostgreSQL (recommended for production):
#   - Uncomment the 'db' service in docker-compose.yml
#   - Update DB_PASSWORD below and use this URL:
# DATABASE_URL=postgresql://produck:${DB_PASSWORD}@db:5432/produck
#
# For local development (non-Docker):
#   - Use relative path for SQLite
# DATABASE_URL=sqlite:///./produck.db

# DB_PASSWORD: Password for PostgreSQL database (only needed if using PostgreSQL)
# Generate a secure password: openssl rand -base64 32
DB_PASSWORD=changeme-to-secure-password

# ============================================================================
# Authentication & Security
# ============================================================================

# SECRET_KEY: Used for signing session tokens and cookies
# REQUIRED: Must be set to a secure random string (minimum 32 characters)
# Generate one with: openssl rand -hex 32
# WARNING: Changing this will invalidate all existing sessions
SECRET_KEY=change-me-to-a-secure-32-char-minimum-key

# SESSION_TIMEOUT_MINUTES: How long user sessions remain valid
SESSION_TIMEOUT_MINUTES=60

# BCRYPT_ROUNDS: Number of rounds for password hashing (higher = more secure but slower)
# Recommended: 12 for production, 10 for development
BCRYPT_ROUNDS=12

# ============================================================================
# AI Service Configuration (Anthropic Claude)
# ============================================================================

# ANTHROPIC_API_KEY: Your Anthropic API key for Claude AI
# REQUIRED: Get your key from https://console.anthropic.com/
# The application will not start without this key
ANTHROPIC_API_KEY=sk-ant-your-key-here

# ANTHROPIC_API_TIMEOUT: Timeout for AI API calls in seconds
ANTHROPIC_API_TIMEOUT=600

# ANTHROPIC_MODEL: Claude model to use
# Options: claude-sonnet-4-5, claude-haiku-4-5, claude-3-7-sonnet-20250219
ANTHROPIC_MODEL=claude-sonnet-4-5

# ============================================================================
# Application Configuration
# ============================================================================

# ENVIRONMENT: Application environment mode
# Options: development, production
# - development: Enables debug features, verbose logging
# - production: Optimized for performance and security
ENVIRONMENT=development

# LOG_LEVEL: Logging verbosity
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
# Recommended: DEBUG for development, INFO for production
LOG_LEVEL=INFO

# HOST: Host to bind the backend server to
# Use 0.0.0.0 to accept connections from any interface (required for Docker)
HOST=0.0.0.0

# PORT: Port for the backend API server
PORT=8000

# RELOAD: Enable auto-reload on code changes (development only)
# Set to False in production
RELOAD=True

# CORS_ORIGINS: Comma-separated list of allowed origins for CORS
# Add your frontend URLs here
CORS_ORIGINS=http://localhost:5173,http://localhost:3000

# ============================================================================
# Frontend Configuration
# ============================================================================

# VITE_API_BASE_URL: Backend API URL for the frontend
# For Docker: Use http://localhost:8000
# For production: Use your actual API domain
VITE_API_BASE_URL=http://localhost:8000

# ============================================================================
# Rate Limiting
# ============================================================================

# RATE_LIMIT_PER_MINUTE: Maximum requests per minute per user
RATE_LIMIT_PER_MINUTE=100

# RATE_LIMIT_ORG_PER_MINUTE: Maximum requests per minute per organization
RATE_LIMIT_ORG_PER_MINUTE=1000

# ============================================================================
# Docker Resource Limits (Production)
# ============================================================================
# These variables control resource allocation for Docker containers
# Only used when running with docker-compose.prod.yml

# Backend resource limits
BACKEND_MEMORY_LIMIT=1g
BACKEND_MEMORY_RESERVATION=512m
BACKEND_CPU_LIMIT=1.0
BACKEND_CPU_RESERVATION=0.5

# Frontend resource limits
FRONTEND_MEMORY_LIMIT=512m
FRONTEND_MEMORY_RESERVATION=256m
FRONTEND_CPU_LIMIT=0.5
FRONTEND_CPU_RESERVATION=0.25

# PostgreSQL resource limits (if using PostgreSQL)
POSTGRES_MEMORY_LIMIT=2g
POSTGRES_MEMORY_RESERVATION=1g
POSTGRES_CPU_LIMIT=1.0
POSTGRES_CPU_RESERVATION=0.5

# ============================================================================
# Optional: Redis (for session storage)
# ============================================================================
# Currently using in-memory sessions, but Redis can be added for production

# REDIS_URL: Redis connection URL
# REDIS_URL=redis://localhost:6379/0

# ============================================================================
# Optional: Observability & Monitoring
# ============================================================================

# LANGSMITH_API_KEY: LangSmith API key for LLM observability
# Leave empty to disable
LANGSMITH_API_KEY=

# LANGSMITH_PROJECT: Project name in LangSmith
LANGSMITH_PROJECT=produck-poc

# ============================================================================
# Quick Start Guide
# ============================================================================
#
# 1. Copy this file to .env:
#    cp .env.example .env
#
# 2. Update required variables:
#    - SECRET_KEY: Generate with: openssl rand -hex 32
#    - ANTHROPIC_API_KEY: Get from https://console.anthropic.com/
#
# 3. Start with Docker:
#    docker-compose up
#
# 4. Access the application:
#    - Frontend: http://localhost:5173
#    - Backend API: http://localhost:8000
#    - API Docs: http://localhost:8000/docs
#
# For production deployment, see DOCKER.md for detailed instructions
# ============================================================================
